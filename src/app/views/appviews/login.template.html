<div class="middle-box text-center loginscreen  animated fadeInDown">
  <div>
    <div>
      <img class="rounded" style="width: 80%;" src="assets/images/LogoImagen.png">
    </div> 
    <h3>Bienvenid@</h3>
    <p>Ingrese su usuario y contraseña.</p>
    <div class="alert alert-danger" role="alert" *ngIf="isError">Usuario y/o contraseña erróneo</div>
    <form class="m-t" role="form" #formLogin="ngForm" (ngSubmit)="onLogin(formLogin)">
      <div class="form-group">
        <input type="text" id="email" name="email" class="form-control" (keypress)="omit_special_char($event)" placeholder="Usuario" [(ngModel)]="user.Usuario" required>
      </div>
      <div class="form-group">
        <input type="password" id="password" name="password" class="form-control" placeholder="Contraseña" [(ngModel)]="user.Password" required>
      </div>
      <button type="submit" class="btn btn-primary block full-width m-b">Ingresar</button>
      <div class="form-group"> Registrarse en la Extranet <a (click)="onCreate()"> Click aquí</a>
      </div>
    </form>

    <a (click)="openModal(template)">¿Olvidó su contraseña?</a>
    <ng-template #template>
      <div class="modal-header" style="display: inline-flex; align-items: center;width: 100%;">
        <img style="width: 32px;height: 32px;" src="assets/images/RosaNautica4.png">
        <h4 class="modal-title pull-left" style="display: inline-table;">Restaurar Contraseña</h4>
        <button type="button" class="close pull-right" style="position: absolute; right: 15px;" aria-label="Close" (click)="modalRef.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="m-t" #formRecCon="ngForm" (ngSubmit)="onRecoverPass(formRecCon)">
          <div class="form-group row">
            <div class="col-sm-12">
              <label>Seleccione :</label><br>
              <label class="radio-inline"><input type="radio" id="SMS" name="optradio" (change)="onItemChange($event)" >SMS</label>
              <label class="radio-inline"><input type="radio" id="Correo" name="optradio" (change)="onItemChange($event)" >Correo</label>
            </div>
          </div>
          <div class="form-group row">
            <div class="col-sm-6"><label>Usuario/Nro Documento :</label></div>
            <div class="col-sm-12"><input type="text" class="form-control" name="Usuario" [ngModel]></div>
          </div>
          <br>
          <div class="form-group row text-center" >
            <div class="col-sm-6"><button type="submit" class="btn btn-w-m btn-primary">Enviar</button></div>
            <div class="col-sm-6"><button type="button" (click)="modalRef.hide()" class="btn btn-w-m btn-default">Cancelar</button></div>
          </div>
        </form>
      </div>
    </ng-template>

    <ng-template #contraseniamodal>
      <div class="ibox-title">
        <h5 class="font-bold text-navy">Cambiar Contraseña</h5>           
      </div>
      <div class="ibox-content col-lg-20">
        <form [formGroup]="contraseniaForm" (ngSubmit)="CambiarContrasenia()">               
            <div class="form-group row">
                <label class="col-lg-6 col-form-label">Contraseña Actual</label>
                <div class="col-lg-8"><input type="password" formControlName="contraAct" placeholder="Contraseña" 
                     class="form-control">                    
                    <div *ngIf="submitted && this.contraseniaForm.controls['contraAct'].errors" class="invalid-feedback">
                            <div *ngIf="this.contraseniaForm.controls['contraAct'].errors.required">Contraseña Actual Requerida</div>                                                 
                    </div>        
                </div>
            </div>

            <div class="form-group row">
              <label class="col-lg-6 col-form-label">Contraseña Nueva</label>
              <div class="col-lg-8">
                <input type="password" formControlName="contraNueva" placeholder="Nueva Contraseña" class="form-control">
                  <div *ngIf="submitted && this.contraseniaForm.controls['contraNueva'].errors" class="invalid-feedback">
                    <div *ngIf="this.contraseniaForm.controls['contraNueva'].errors.required">Contraseña Nueva Requerida</div>                                          
                  </div>                    
                </div>
            </div>

            <div class="form-group row">
              <label class="col-lg-8 col-form-label">Confirmación Contraseña</label>
              <div class="col-lg-8">
                <input type="password" required pattern = "^(?=.*[@$!%*#?&])[A-Z]([a-zA-Z0-9@$!%*#?&]){8,}$" formControlName="confContra" placeholder="Conf. Contraseña" class="form-control">
                <div class="col-lg-10" *ngIf="submitted && this.contraseniaForm.controls['confContra'].errors" class="invalid-feedback">
                  <div *ngIf="this.contraseniaForm.controls['confContra'].errors.required">Conf. Contraseña Requerida</div>                      
                  <div class="col-lg-2" *ngIf="this.contraseniaForm.controls['confContra'].errors.pattern" class="stat-percent font-bold text-danger" >
                    Para la nueva y confirmación de contraseña, el formato es el sgte: El 1er caracter letra Mayus, al menos una letra, un número, un caracter especial y
                    debe ser mínimo de 8 caracteres.</div>                                          
                </div>                    
              </div>
          </div>               
         
          <div class="form-group row">
              <div class="col-sm-4"><button type="submit" class="btn btn-w-m btn-primary">Aceptar</button></div>
              <div class="col-sm-2"></div>   
                                          
          </div>
          <div class="form-group row">                    
                <div *ngIf="this.errorgen" class="font-bold text-danger"> {{this.errormsj}} </div>                                   
            </div>
        </form>
      </div>



    </ng-template>


  </div>
</div>
<ngx-spinner
  bdColor="rgba(51,51,51,0.8)"
  size="medium"
  color="#fff"
  type="ball-scale-multiple"
>
  <p style="font-size: 20px; color: white">Espere...</p>
</ngx-spinner>
